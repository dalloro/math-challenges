# Specification - Enhanced Feedback & UX Polish

## Overview
This track introduces visual celebrations (heart-beat animations), LaTeX math rendering support, a mandatory review period for static solutions, and improved control over AI features in the Settings page.

## Functional Requirements

### 1. Outcome Animations (Heart-Beat)
- **Triggers:**
    - Correct Answer: Show `happy.png`.
    - Incorrect Answer: Show `sad.png`.
    - Challenge Completion: Show `completed.png`.
- **Visuals:**
    - Overlay at the center of the page, appearing in front of all UI elements.
    - Size: Approximately 1/3 of the solution column's width.
    - Animation: A "heart-beat" effect (scaling up and down) repeated twice.
    - Duration: 1 second per beat (2 seconds total).
- **Assets:** Located in the `public/` folder.

### 2. LaTeX Math Rendering
- **Integration:** Use **KaTeX** to render mathematical notation.
- **Scope:** Applied to all Markdown content generated by the Gemini AI and static Ideal Solutions.
- **Behavior:** Snippets like `$$\frac{1}{2}$$` or inline `$x^2$` must be rendered as properly formatted mathematical symbols.

### 3. Review Delay (Static Mode)
- **Constraint:** In "Static Mode" (no API key or AI disabled), the "Continue to Next Challenge" button will be disabled for the first **5 seconds** after submission.
- **Feedback:** If the user clicks or hovers over the disabled button during this window, a tooltip should appear with the text: *"Take a moment to read the solution!"*.
- **Exception:** No delay is applied when in AI Mode (to avoid stacking latency).

### 4. Gemini AI Toggle
- **UI:** A **Toggle Switch** added to the `SettingsPage.tsx`.
- **Functionality:** Allows users to enable or disable AI features without clearing their stored Gemini API key.
- **Persistence:** The toggle state must be saved in `localStorage` and respected across sessions.

## Non-Functional Requirements
- **Performance:** KaTeX rendering should be performant and not block the main thread.
- **Animations:** Animations should be smooth and utilize CSS transforms for efficiency.

## Acceptance Criteria
- [ ] Correct/Incorrect/Completed images trigger with the heart-beat animation.
- [ ] Math formulas in AI/Ideal responses are rendered via KaTeX.
- [ ] "Next" button is delayed for 5s only in static mode with a helpful tooltip.
- [ ] Settings page toggle correctly enables/disables AI calls while preserving the key.

## Out of Scope
- Modifying the core adaptive engine logic.
- Adding new content to the question bank.
